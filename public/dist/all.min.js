function piController(e,a,o,l){e.loading_message="Loading...",e.current_message=e.loading_message,e.current_image=e.loading_message,e.current_message_author=e.loading_message,e.current_image_author=e.loading_message,e.image_wider=!1,e.minimize=!1,e.width=700,e.height=500,e.current_user={},e.last_payload="",l.on("client_settings",function(a){console.log("Received Setting Changes"),console.log(a),console.log(e.last_payload),"full_screen"in a.settings&&a.settings.payload!==e.last_payload?(e.last_payload=a.settings.payload,e.set_settings(a)):console.log("There is a problem:",a)}),l.on("message",function(a){console.log("Message received!"),console.log(a),console.log(e.last_payload),a.message&&a.payload!==e.last_payload?(e.last_payload=a.payload,e.set_message(a)):console.log("There is a problem:",a)}),l.on("picture",function(a){console.log("Image received!"),console.log(a),console.log(e.last_payload),a.message&&a.payload!==e.last_payload?(e.last_payload=a.payload,e.set_image(a)):console.log("There is a problem:",a)}),e.set_message=function(a){e.current_message='"'+a.message+'"',e.current_message_author="-"+a.email},e.set_image=function(a){e.current_image=a.message,e.current_image_author=a.email},e.set_settings=function(a){var o={"true":function(){e.minimize=!1},"false":function(){e.minimize=!0},toggle:function(){e.minimize=!e.minimize}};o[a.settings.full_screen]()},e.load=function(){a.get("/load_message",{}).success(function(a){console.log(a),e.set_message(a.data.prop)}).error(function(e){console.log("Error1: "+e)}),a.get("/load_image",{}).success(function(a){console.log(a),e.set_image(a.data.prop)}).error(function(e){console.log("Error1: "+e)}),$("#portal_image").load(function(){console.log(this),$("#portal_image").removeClass("image_wider image_taller bounds"),console.log("Width: "+$("#portal_image")[0].naturalWidth+" Height: "+$("#portal_image")[0].naturalHeight),console.log("Width: "+$("#image_box")[0].clientWidth+" Height: "+$("#image_box")[0].clientHeight),$("#portal_image")[0].naturalWidth>=$("#portal_image")[0].naturalHeight?(parseInt($("#portal_image")[0].naturalHeight,10)>e.height&&$("#portal_image").addClass("bounds"),$("#portal_image").addClass("image_wider")):(parseInt($("#portal_image")[0].naturalWidth,10)>e.width&&$("#portal_image").addClass("bounds"),$("#portal_image").addClass("image_taller")),console.log("Image Wider"),console.log(e.image_wider)})}}var piModule=angular.module("piModule",[]);